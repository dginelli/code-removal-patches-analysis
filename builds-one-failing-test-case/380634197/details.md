# Information about the failure

| Failure type | Failure details | Failing test case | Changed file by jKali |
|--------------|-------------------|----------------------------|-------------------|
| java.lang.AssertionError | expected:<false> but was:<true> | [GT4500Test.java](https://github.com/repairnator/repairnator-experiments-jkali-one-failing-test-case/blob/56c6b18912d8305128accfb32537b6c4f2d3c955/src/test/java/hu/bme/mit/spaceship/GT4500Test.java#L151) | [GT4500.java](https://github.com/repairnator/repairnator-experiments-jkali-one-failing-test-case/blob/56c6b18912d8305128accfb32537b6c4f2d3c955/src/main/java/hu/bme/mit/spaceship/GT4500.java#L38)|

- **Human Patch**:

```diff
From 5669e29937d3a18c4ac17d5e33ba2dd03cd5ec75 Mon Sep 17 00:00:00 2001
From: meres <kgreg314@gmail.com>
Date: Fri, 18 May 2018 04:05:40 -0700
Subject: [PATCH] Add JoCoCo & Implement ALL firing mode perfectly

diff --git a/src/main/java/hu/bme/mit/spaceship/GT4500.java b/src/main/java/hu/bme/mit/spaceship/GT4500.java
index 48160c0..bbcd26d 100644
--- a/src/main/java/hu/bme/mit/spaceship/GT4500.java
+++ b/src/main/java/hu/bme/mit/spaceship/GT4500.java
@@ -78,7 +78,18 @@ public boolean fireTorpedo(FiringMode firingMode) {
      else{
         // try to fire both of the torpedo stores
         //TODO implement feature
-	firingSuccess = true;
+        if (! primaryTorpedoStore.isEmpty() && ! secondaryTorpedoStore.isEmpty()) {
+          boolean successPrimary = primaryTorpedoStore.fire(1);
+	        boolean successSecondary = secondaryTorpedoStore.fire(1);
+	        firingSuccess = successPrimary || successSecondary;
+          wasPrimaryFiredLast = false;
+        } else if (! primaryTorpedoStore.isEmpty()) {
+            firingSuccess = primaryTorpedoStore.fire(1);
+            wasPrimaryFiredLast = true;          
+        } else if (! secondaryTorpedoStore.isEmpty()) {
+            firingSuccess = secondaryTorpedoStore.fire(1);
+            wasPrimaryFiredLast = false;          
+        }
 
         
     }
```

- **Overview**: the problem is related to the outermost `else branch` of [the method](https://github.com/repairnator/repairnator-experiments-jkali-one-failing-test-case/blob/56c6b18912d8305128accfb32537b6c4f2d3c955/src/main/java/hu/bme/mit/spaceship/GT4500.java#L38) removed by jKali. Indeed, looking at the commit history of the project, the developer implemented the outermost `else branch` in the [next commit](https://github.com/KGreg314/ivt-lab/compare/e45e9f994bdc...5669e29937d3).
- **Reason why the patch has been generated**: the test cases don't cover all of the possible paths of the method `fireTorpedo`, that is the bugged method changed by jKali. In particular, applying the code-removal patch, the method `fireTorpedo` executed by the failing test case returns the default value (`false`) that is the value expected by the test to pass. Actually, the test cases passes just because the default value is the same of the exptected value by the test case, and not because of the correctness of the patch.
- **Useful information for the developer**: the code-removal patch suggests that the feature associated with the `else branch` (removed by the patch generated by jKali) has an error. Indeed, looking at the source code, the `else branch`has yet to be implemented by the developer.
